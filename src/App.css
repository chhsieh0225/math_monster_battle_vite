*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Noto Sans TC',sans-serif;overflow:hidden;height:100vh;height:100dvh;background:#000;-webkit-user-select:none;user-select:none}
button{font-family:inherit;cursor:pointer;-webkit-tap-highlight-color:transparent}
button:active{transform:scale(0.96)!important}
.scene-bg{position:absolute;inset:0;background-size:cover;background-position:center;image-rendering:auto;z-index:0;}

@keyframes enemyHit{0%{transform:translate(0,0)}10%{transform:translate(8px,-4px)}20%{transform:translate(-6px,2px)}30%{transform:translate(4px,-2px)}50%{transform:translate(0,0)}100%{transform:translate(0,0)}}
@keyframes playerHit{0%{transform:translate(0,0) scaleX(-1)}10%{transform:translate(-8px,4px) scaleX(-1)}20%{transform:translate(6px,-2px) scaleX(-1)}50%{transform:translate(0,0) scaleX(-1)}100%{transform:translate(0,0) scaleX(-1)}}
@keyframes attackLunge{0%{transform:translate(0,0) scaleX(-1)}30%{transform:translate(60px,-40px) scaleX(-1)}50%{transform:translate(60px,-40px) scaleX(-1)}100%{transform:translate(0,0) scaleX(-1)}}
@keyframes enemyAttackLunge{0%{transform:translate(0,0)}30%{transform:translate(-60px,40px)}50%{transform:translate(-60px,40px)}100%{transform:translate(0,0)}}
@keyframes dmgPop{0%{transform:translateY(0) scale(0.5);opacity:0}20%{transform:translateY(-10px) scale(1.2);opacity:1}40%{transform:translateY(-20px) scale(1);opacity:1}100%{transform:translateY(-50px);opacity:0}}
@keyframes flashWhite{0%{filter:brightness(1)}15%{filter:brightness(3)}30%{filter:brightness(1)}45%{filter:brightness(2.5)}60%{filter:brightness(1)}}
@keyframes popIn{0%{transform:scale(0.8);opacity:0}100%{transform:scale(1);opacity:1}}
@keyframes fadeSlide{0%{transform:translateY(12px);opacity:0}100%{transform:translateY(0);opacity:1}}
@keyframes chargeGlow{0%{filter:drop-shadow(0 0 4px rgba(255,200,0,0))}50%{filter:drop-shadow(0 0 16px rgba(255,200,0,0.8))}100%{filter:drop-shadow(0 0 4px rgba(255,200,0,0))}}
@keyframes slideInBattle{0%{transform:translateX(120px);opacity:0}100%{transform:translateX(0);opacity:1}}
@keyframes slideInPlayer{0%{transform:translateX(-120px) scaleX(-1);opacity:0}100%{transform:translateX(0) scaleX(-1);opacity:1}}
@keyframes sparkle{0%{transform:scale(0) rotate(0deg);opacity:1}50%{transform:scale(1) rotate(180deg);opacity:1}100%{transform:scale(0) rotate(360deg);opacity:0}}
@keyframes emberRise{0%{transform:translateY(0) scale(1);opacity:0.6}40%{opacity:0.9}100%{transform:translateY(-110px) scale(0.2);opacity:0}}
@keyframes lavaGlow{0%,100%{opacity:0.18;transform:scale(1)}50%{opacity:0.35;transform:scale(1.15)}}
@keyframes float{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-8px) scale(1.03)}}
@keyframes floatFlip{0%,100%{transform:translateY(0) scaleX(-1) scaleY(1)}50%{transform:translateY(-6px) scaleX(-1.02) scaleY(1.04)}}
@keyframes shadowPulse{0%,100%{transform:scaleX(1) scaleY(1);opacity:0.55}50%{transform:scaleX(0.82) scaleY(0.82);opacity:0.25}}
@keyframes bossShadowPulse{0%,100%{transform:scaleX(1) scaleY(1);opacity:0.55}25%{transform:scaleX(0.9) scaleY(0.9);opacity:0.35}50%{transform:scaleX(1) scaleY(1);opacity:0.5}75%{transform:scaleX(0.85) scaleY(0.85);opacity:0.3}}
@keyframes shieldPulse{0%{transform:scale(0);opacity:0}20%{transform:scale(1.15);opacity:1}50%{transform:scale(1);opacity:0.85}80%{transform:scale(1.05);opacity:0.9}100%{transform:scale(1.1);opacity:0}}
@keyframes shieldFlash{0%{background:transparent}15%{background:rgba(251,191,36,0.25)}40%{background:transparent}55%{background:rgba(251,191,36,0.15)}100%{background:transparent}}
@keyframes dodgeSlide{0%{transform:translateX(0) scaleX(-1)}25%{transform:translateX(-60px) translateY(-20px) scaleX(-1);opacity:0.2}55%{transform:translateX(-60px) translateY(-20px) scaleX(-1);opacity:0.2}100%{transform:translateX(0) scaleX(-1);opacity:1}}
@keyframes dodgeFlash{0%{background:transparent}15%{background:rgba(56,189,248,0.2)}40%{background:transparent}55%{background:rgba(56,189,248,0.12)}100%{background:transparent}}
@keyframes vineCounter{0%{transform:scale(0) rotate(-30deg);opacity:0}25%{transform:scale(1.1) rotate(5deg);opacity:1}60%{transform:scale(1) rotate(0deg);opacity:0.9}100%{transform:scale(0) rotate(30deg);opacity:0}}
@keyframes counterFlash{0%{background:transparent}15%{background:rgba(34,197,94,0.2)}40%{background:transparent}55%{background:rgba(34,197,94,0.12)}100%{background:transparent}}
@keyframes specDefReady{0%,100%{filter:drop-shadow(0 0 6px rgba(251,191,36,0.3))}50%{filter:drop-shadow(0 0 16px rgba(251,191,36,0.8))}}
@keyframes timerShrink{0%{width:100%}100%{width:0%}}
@keyframes timerPulse{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}
@keyframes timerUrgent{0%{background:#ef4444}50%{background:#fbbf24}100%{background:#ef4444}}
@keyframes fireballFly{0%{transform:translate(0,0) scale(0.3);opacity:0}15%{transform:translate(20px,-10px) scale(1);opacity:1}85%{transform:translate(160px,-80px) scale(1.2);opacity:1}100%{transform:translate(180px,-90px) scale(0.5);opacity:0}}
@keyframes fireTrail{0%{transform:translate(0,0) scale(0);opacity:0}10%{opacity:0.8;transform:scale(1)}100%{transform:translate(-30px,15px) scale(0);opacity:0}}
@keyframes lightningStrike{0%{clip-path:inset(100% 0 0 0);opacity:0}20%{clip-path:inset(0 0 0 0);opacity:1;filter:brightness(2)}40%{opacity:0.3}50%{opacity:1;filter:brightness(3)}70%{opacity:0.2}80%{opacity:1;filter:brightness(2)}100%{opacity:0;filter:brightness(1)}}
@keyframes lightningFlash{0%{background:transparent}10%{background:rgba(251,191,36,0.15)}20%{background:transparent}30%{background:rgba(251,191,36,0.1)}40%{background:transparent}100%{background:transparent}}
@keyframes waterWave{0%{transform:translateX(-100%) scaleY(0.3);opacity:0}20%{transform:translateX(-40%) scaleY(1);opacity:0.8}60%{transform:translateX(60%) scaleY(1.1);opacity:0.7}100%{transform:translateX(120%) scaleY(0.5);opacity:0}}
@keyframes waterDrop{0%{transform:translate(0,0) scale(0);opacity:0}20%{transform:translate(var(--dx),var(--dy)) scale(1);opacity:0.9}100%{transform:translate(var(--dx),calc(var(--dy) + 40px)) scale(0.3);opacity:0}}
@keyframes darkPulse{0%{transform:scale(0);opacity:0;background:rgba(88,28,135,0.8)}30%{transform:scale(1);opacity:0.9}60%{transform:scale(1.8);opacity:0.5;background:rgba(168,85,247,0.3)}100%{transform:scale(2.5);opacity:0}}
@keyframes darkScreenFlash{0%{background:transparent}15%{background:rgba(0,0,0,0.7)}30%{background:rgba(88,28,135,0.4)}50%{background:rgba(0,0,0,0.5)}70%{background:rgba(168,85,247,0.2)}100%{background:transparent}}
@keyframes enemyGrassHit{0%{filter:brightness(1) hue-rotate(0deg);transform:translate(0,0)}15%{filter:brightness(1.8) hue-rotate(60deg);transform:translate(-5px,3px)}30%{filter:brightness(1.2) hue-rotate(30deg);transform:translate(4px,-2px)}50%{filter:brightness(1.5) hue-rotate(50deg);transform:translate(-3px,2px)}70%{filter:brightness(1.2);transform:translate(2px,0)}100%{filter:brightness(1) hue-rotate(0deg);transform:translate(0,0)}}
@keyframes leafSlash{0%{transform:translate(0,0) rotate(-45deg) scale(0);opacity:0}20%{transform:translate(40px,-20px) rotate(0deg) scale(1.2);opacity:1}70%{transform:translate(140px,-70px) rotate(30deg) scale(1);opacity:0.8}100%{transform:translate(180px,-90px) rotate(45deg) scale(0.3);opacity:0}}
@keyframes leafBurst{0%{transform:translate(0,0) rotate(0deg) scale(0);opacity:0}15%{transform:scale(1);opacity:0.9}100%{transform:translate(var(--lx),var(--ly)) rotate(var(--lr)) scale(0);opacity:0}}
@keyframes grassScreenFlash{0%{background:transparent}12%{background:rgba(34,197,94,0.15)}25%{background:transparent}35%{background:rgba(74,222,128,0.1)}50%{background:transparent}100%{background:transparent}}
@keyframes enemyFireHit{0%{filter:brightness(1)}20%{filter:brightness(2) hue-rotate(-20deg)}40%{filter:brightness(1.3)}60%{filter:brightness(1.8) hue-rotate(-10deg)}100%{filter:brightness(1)}}
@keyframes enemyElecHit{0%{filter:brightness(1);transform:translate(0,0)}10%{filter:brightness(3);transform:translate(3px,0)}20%{filter:brightness(1.5);transform:translate(-3px,0)}30%{filter:brightness(2.5);transform:translate(2px,0)}40%{filter:brightness(1);transform:translate(-2px,0)}50%{filter:brightness(2);transform:translate(0,0)}100%{filter:brightness(1);transform:translate(0,0)}}
@keyframes enemyWaterHit{0%{filter:brightness(1);transform:translate(0,0)}20%{filter:brightness(1.5) saturate(2);transform:translate(8px,0)}40%{filter:brightness(1.2);transform:translate(-4px,0)}60%{filter:brightness(1.3) saturate(1.5);transform:translate(2px,0)}100%{filter:brightness(1);transform:translate(0,0)}}
@keyframes enemyDarkHit{0%{filter:brightness(1);transform:scale(1)}15%{filter:brightness(0.2);transform:scale(0.9)}30%{filter:brightness(3);transform:scale(1.15)}50%{filter:brightness(0.5);transform:scale(0.95)}70%{filter:brightness(2);transform:scale(1.05)}100%{filter:brightness(1);transform:scale(1)}}
@keyframes evolveFlash{0%{opacity:0}8%{opacity:0.95}30%{opacity:0.3}45%{opacity:0.7}100%{opacity:0}}
@keyframes evolveSpin{from{transform:rotate(0deg) translateX(var(--orbit)) rotate(0deg)}to{transform:rotate(360deg) translateX(var(--orbit)) rotate(-360deg)}}
@keyframes evolveGlow{0%,100%{filter:drop-shadow(0 0 8px rgba(99,102,241,0.3))}50%{filter:drop-shadow(0 0 30px rgba(99,102,241,0.8)) drop-shadow(0 0 60px rgba(168,85,247,0.4))}}
@keyframes growIn{0%{transform:scale(0.2);opacity:0;filter:brightness(3)}35%{transform:scale(1.2);filter:brightness(1.5)}60%{transform:scale(0.95)}100%{transform:scale(1);opacity:1;filter:brightness(1)}}
@keyframes colorBurst{0%{transform:scale(0);opacity:0.8}100%{transform:scale(4);opacity:0}}
@keyframes bgShimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes bossFloat{0%,100%{transform:translateY(0) scale(1)}25%{transform:translateY(-3px) scale(1.02)}50%{transform:translateY(-1px) scale(1)}75%{transform:translateY(-4px) scale(1.01)}}
@keyframes bossShake{0%,100%{transform:translateX(0)}10%{transform:translateX(-2px)}20%{transform:translateX(2px)}30%{transform:translateX(-1px)}40%{transform:translateX(1px)}50%{transform:translateX(0)}}
@keyframes bossPulse{0%,100%{filter:drop-shadow(0 0 4px rgba(120,40,80,0.3))}50%{filter:drop-shadow(0 0 12px rgba(180,60,100,0.6)) drop-shadow(0 0 20px rgba(120,40,80,0.3))}}

/* ─── SVG Attack Effect Keyframes ─── */
@keyframes leafBladeFly{0%{transform:translate(0,0) rotate(-30deg) scale(0.3);opacity:0}15%{transform:translate(calc(var(--fly-x)*0.13),calc(var(--fly-y)*0.13)) rotate(-5deg) scale(1.1);opacity:1}80%{transform:translate(calc(var(--fly-x)*0.84),calc(var(--fly-y)*0.84)) rotate(15deg) scale(1);opacity:0.9}100%{transform:translate(var(--fly-x),var(--fly-y)) rotate(30deg) scale(0.4);opacity:0}}
@keyframes vineWhipDraw{0%{stroke-dashoffset:300;opacity:0}8%{opacity:1}85%{stroke-dashoffset:0;opacity:1}100%{stroke-dashoffset:-50;opacity:0}}
@keyframes leafSpin{0%{transform:translate(0,0) rotate(0deg) scale(0);opacity:0}20%{transform:translate(calc(var(--lx)*0.2),calc(var(--ly)*0.2)) rotate(90deg) scale(1);opacity:0.9}100%{transform:translate(var(--lx),var(--ly)) rotate(360deg) scale(0.2);opacity:0}}
@keyframes windSweep{0%{transform:translateX(-110%) scaleY(0.4);opacity:0}20%{transform:translateX(-30%) scaleY(1);opacity:0.7}100%{transform:translateX(110%) scaleY(0.6);opacity:0}}
@keyframes bubbleFloat{0%{transform:translate(0,0) scale(0.2);opacity:0}20%{transform:translate(calc(var(--fly-x)*0.17),calc(var(--fly-y)*0.17)) scale(1);opacity:0.9}75%{transform:translate(calc(var(--fly-x)*0.76),calc(var(--fly-y)*0.76)) scale(1.05);opacity:0.7}100%{transform:translate(var(--fly-x),var(--fly-y)) scale(0.6);opacity:0}}
@keyframes waveSweep{0%{transform:translateX(-110%) scaleY(0.3);opacity:0}20%{transform:translateX(-30%) scaleY(1);opacity:0.9}60%{transform:translateX(50%) scaleY(1.1);opacity:0.7}100%{transform:translateX(120%) scaleY(0.5);opacity:0}}
@keyframes splashBurst{0%{transform:translate(0,0) scale(0.3);opacity:0}20%{transform:translate(calc(var(--px)*0.2),calc(var(--py)*0.2)) scale(1);opacity:0.9}100%{transform:translate(var(--px),var(--py)) scale(0.1);opacity:0}}
@keyframes flameFly{0%{transform:translate(0,0) scale(0.2) rotate(10deg);opacity:0}12%{transform:translate(calc(var(--fly-x)*0.11),calc(var(--fly-y)*0.11)) scale(1) rotate(0deg);opacity:1}82%{transform:translate(calc(var(--fly-x)*0.86),calc(var(--fly-y)*0.86)) scale(1.15) rotate(-5deg);opacity:0.95}100%{transform:translate(var(--fly-x),var(--fly-y)) scale(0.4) rotate(-10deg);opacity:0}}
@keyframes fireExpand{0%{transform:scale(0);opacity:0}25%{transform:scale(0.6);opacity:0.9}50%{transform:scale(1);opacity:0.7}100%{transform:scale(1.8);opacity:0}}
@keyframes darkRingExpand{0%{transform:scale(0);opacity:0}25%{transform:scale(0.8);opacity:1}60%{transform:scale(1.5);opacity:0.5}100%{transform:scale(2.2);opacity:0}}
@keyframes darkStarSpin{0%{transform:translate(0,0) rotate(0deg) scale(0);opacity:0}25%{transform:translate(calc(var(--sx)*0.3),calc(var(--sy)*0.3)) rotate(90deg) scale(1);opacity:1}100%{transform:translate(var(--sx),var(--sy)) rotate(360deg) scale(0.2);opacity:0}}
@keyframes arcFlow{0%{stroke-dashoffset:40;opacity:0}15%{opacity:0.8}100%{stroke-dashoffset:-40;opacity:0}}
@keyframes ultGlow{0%{opacity:0}20%{opacity:1}50%{opacity:0.6}75%{opacity:0.8}100%{opacity:0}}
@keyframes ultApproach{0%{transform:translate(0,0) scale(0.3);opacity:0}12%{transform:translate(calc(var(--fly-x)*0.09),calc(var(--fly-y)*0.09)) scale(0.7);opacity:0.35}55%{transform:translate(calc(var(--fly-x)*0.65),calc(var(--fly-y)*0.65)) scale(0.85);opacity:0.3}80%{transform:translate(calc(var(--fly-x)*0.91),calc(var(--fly-y)*0.91)) scale(1);opacity:0.5}100%{transform:translate(var(--fly-x),var(--fly-y)) scale(1.6);opacity:0}}

/* ─── Scene ambient particle keyframes ─── */
@keyframes leafDrift{0%{transform:translate(0,0) rotate(0deg) scale(0.5);opacity:0}10%{opacity:0.7}50%{transform:translate(var(--ldx),var(--ldy)) rotate(180deg) scale(1);opacity:0.6}100%{transform:translate(calc(var(--ldx)*1.8),calc(var(--ldy)*2.2)) rotate(360deg) scale(0.3);opacity:0}}
@keyframes fireflyGlow{0%{transform:translate(0,0) scale(0.6);opacity:0}15%{opacity:var(--ff-op)}40%{transform:translate(var(--fx),var(--fy)) scale(1);opacity:var(--ff-op)}60%{transform:translate(calc(var(--fx)*0.7),calc(var(--fy)*1.3)) scale(0.8);opacity:calc(var(--ff-op)*0.5)}80%{transform:translate(var(--fx),calc(var(--fy)*0.6)) scale(1.1);opacity:var(--ff-op)}100%{transform:translate(calc(var(--fx)*1.5),var(--fy)) scale(0.4);opacity:0}}
@keyframes steelSpark{0%{transform:scale(0);opacity:0}20%{transform:scale(1.2);opacity:0.9}40%{transform:scale(0.8);opacity:0.4}60%{transform:scale(1);opacity:0.7}100%{transform:scale(0);opacity:0}}
@keyframes smokeDrift{0%{transform:translate(0,0) scale(var(--sm-s,1));opacity:0}12%{opacity:var(--sm-op,0.08)}50%{transform:translate(var(--sm-dx),var(--sm-dy)) scale(calc(var(--sm-s,1)*1.3));opacity:calc(var(--sm-op,0.08)*0.7)}100%{transform:translate(calc(var(--sm-dx)*1.6),calc(var(--sm-dy)*0.5)) scale(calc(var(--sm-s,1)*1.8));opacity:0}}
@keyframes lightPulse{0%,100%{opacity:var(--lp-lo,0.04)}50%{opacity:var(--lp-hi,0.1)}}
