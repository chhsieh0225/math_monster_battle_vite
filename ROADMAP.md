# Math Monster Battle — 產品更新路線圖

**目標**：上架 Apple App Store + Steam
**用戶年齡**：6–15 歲
**商業模式**：買斷制 $1–3 USD
**技術路線**：Web + PWA 為主體，Capacitor (iOS) / Electron (Steam) 打包

---

## 現狀分析

### 已完成的核心

- 3 主角 × 4 招式，完整屬性相剋系統
- 5 種敵人（含進化形態）+ Boss
- 10 回合制闖關，敵人數值遞增 12%/回合
- 四則運算出題（加減乘除），4 階難度
- 狀態效果（灼燒、凍結、特殊防禦）
- 進化系統（Lv.3/6/9 三階段）
- 招式升級（最高 Lv.6）
- 計時模式、排行榜（localStorage）
- 5 場景背景 + 粒子特效 + 攻擊動畫
- PWA 離線支援、直向鎖定

### 上架前的關鍵缺口

| 缺口 | 嚴重度 | 說明 |
|------|--------|------|
| 無音效/音樂 | 🔴 高 | 兒童遊戲無聲音 = 體驗大幅折扣 |
| 無存檔系統 | 🔴 高 | 重開頁面就全部重來，無法留住玩家 |
| 僅繁中 | 🟡 中 | 上架國際市場至少需要英文 |
| 無新手引導 | 🟡 中 | 屬性相剋、充能系統對 6 歲兒童不直覺 |
| 內容量不足 | 🟡 中 | 10 回合一局 ≈ 15 分鐘，重玩動力薄弱 |
| 無設定頁面 | 🟠 低中 | 難度、音量、語言切換都沒有入口 |
| 無家長控制 | 🟠 低中 | App Store 兒童類別有審查要求 |
| 隱私政策缺失 | 🔴 高 | Apple/Steam 上架強制需要 |

---

## 短期更新（1–2 個月）— 打磨核心體驗

目標：讓現有的一局遊戲從頭到尾「完整且好玩」。

### S1. 音效系統
- 背景音樂：標題畫面、5 種場景各一首（用 royalty-free 8-bit/chiptune 風格）
- 戰鬥音效：答對（叮）、答錯（嗡）、攻擊命中（4 種屬性）、敵人攻擊、進化、勝利、KO
- 技術：Web Audio API + Howler.js，預載 + 延遲解鎖（iOS 需要用戶互動才能播放）
- 設定頁加入音量滑桿（BGM / SE 分開）

### S2. 存檔與進度保存
- 自動存檔：每場戰鬥勝利後寫入 localStorage
- 存檔內容：目前回合、HP、Lv、招式等級、連擊紀錄、正確率
- 標題畫面顯示「繼續冒險」按鈕（有存檔時）
- 新增「重新開始」確認對話框，防止誤觸

### S3. 新手教學（首次遊玩引導）
- 第一場戰鬥前：3–4 頁互動式教學（點擊推進）
  - 「選擇招式 → 回答問題 → 造成傷害」基本流程
  - 屬性相剋簡介（火剋草、水剋火⋯⋯）
  - 充能條 → 終極爆破說明
- 首次進化時：簡短說明「你的夥伴進化了！全招式提升！」
- 可在設定中重看教學

### S4. 設定頁面
- 從標題畫面進入
- 項目：BGM 音量、SE 音量、難度選擇（見 S5）、語言（預留欄位）、重置存檔
- 用 modal overlay 實作，不需要新 route

### S5. 難度選擇
- 簡單模式（幼兒 6–8 歲）：range 整體下調、敵人攻擊力 ×0.6、計時延長到 8 秒
- 普通模式（目前的預設）
- 困難模式（挑戰 12–15 歲）：range 上調、敵人攻擊力 ×1.3、計時縮短到 4 秒
- 存入 localStorage，影響 `genQ()` 的 range 與 `useBattle` 的數值公式

### S6. 錯題回顧
- GameOver 畫面新增「錯題複習」按鈕
- 記錄本局所有答錯的題目（display + answer）
- 顯示正確答案 + 簡單解題步驟（例：「12 × 7 = 84，想成 12×5=60, 12×2=24, 60+24=84」）
- 強化學習性，也是 App Store 教育類上架的加分項

---

## 中期更新（3–6 個月）— 擴充內容與重玩性

目標：讓玩家有理由玩第二次、第三次，並建立收集驅動力。

### M1. 怪獸圖鑑系統
- 新 Screen：「圖鑑」（從標題畫面進入）
- 紀錄所有遭遇過的怪獸（普通形態 + 進化形態）
- 每隻怪獸頁面：插圖、屬性、HP/ATK、弱點提示、已擊敗次數
- 圖鑑完成度百分比 → 成就感 + 重玩動力

### M2. 成就系統
- 15–20 個成就（可逐步擴充），例：
  - 「初心者」：完成第一場戰鬥
  - 「連擊王」：單局連擊達 10
  - 「完美通關」：正確率 100% 通關
  - 「秒殺」：一招 KO 敵人
  - 「收集家」：圖鑑完成 100%
  - 「速算天才」：計時模式通關
- 成就徽章顯示在玩家個人頁
- 解鎖成就時有彈窗動畫 + 音效

### M3. 多主角擴充 — 電系主角
- 新主角：小雷獸（電系）→ 雷鳴獸 → 雷神王
- 招式主題：電系 = 乘除混合題
  - 第一招：簡單乘法 [2,5]
  - 第二招：基本除法 [2,9]
  - 第三招：困難乘除混合 [4,12]
  - 第四招：終極爆破（已有 ElecEffect）
- 4 主角讓選角畫面更豐富，也增加重玩價值

### M4. 關卡模式（章節制）
- 將目前的 10 回合闖關改為「冒險模式」第一章
- 新增「章節選擇」畫面，每章 8–10 場戰鬥
- 第二章：新場景（冰雪山脈？海底神殿？）+ 新敵人
- 第三章：混合屬性敵人 + 雙屬性 Boss
- 每章結尾有劇情文字過場
- 這是最能拉長遊戲時間的更新

### M5. 每日挑戰
- 每天一題特殊關卡（固定 seed，全玩家同題）
- 3 場高難度連續戰鬥，限計時模式
- 完成後獲得每日獎勵（成就點數、特殊稱號）
- 7 天連續完成 → 特殊成就
- 技術：用日期做 seed，不需後端

### M6. 國際化（i18n）
- 引入 i18next + react-i18next
- 第一波語言：繁中、簡中、英文、日文
- 翻譯內容：怪獸名、招式名、UI 文字、教學文字
- 語言切換在設定頁
- 這是 App Store 國際上架的前提

---

## 長期更新（6–12 個月）— 上架準備 + 社交功能

目標：達到商店上架的品質門檻，並加入社交元素延長生命週期。

### L1. 上架包裝

#### iOS (App Store)
- 使用 Capacitor 打包 PWA → iOS native app
- 處理項目：
  - App icon（1024×1024 + 各尺寸）
  - Launch screen / splash screen
  - Safe area 適配（劉海、圓角）
  - 隱私政策頁面（必須有 URL）
  - App Store 截圖（6.7" / 6.1" / iPad）
  - 年齡分級：4+（教育類）
  - 無 IAP、無廣告 → 審查相對簡單
  - Game Center 整合（排行榜、成就）

#### Steam
- 使用 Electron 打包 → Windows/Mac 桌面 app
- 處理項目：
  - Steam 開發者帳號（$100 一次性）
  - Steamworks SDK 整合（成就、排行榜）
  - 商店頁面素材（header banner、capsule images、截圖、trailer）
  - 鍵盤操作支援（方向鍵選招、數字鍵答題）
  - 全螢幕 / 視窗模式切換
  - 手把支援（加分項）

### L2. 線上排行榜
- 簡易後端（Firebase / Supabase / PocketBase）
- 全球排行榜（每週/每月/總榜）
- 防作弊：答題時間 + 正確率 + 回合數的 hash 驗證
- 顯示玩家暱稱 + 主角 + 分數

### L3. 對戰模式（PvP）
- 本地雙人對戰（同一裝置，左右分屏或輪流）
- 雙方各選一主角，同時出題
- 先答對的玩家發動攻擊
- 這是兒童遊戲的殺手級功能：兄弟姊妹/同學之間的學習競爭
- 技術：純前端，不需網路

### L4. 自訂題庫
- 家長/老師可以建立自訂題庫
- 支援手動輸入題目 + 答案
- 套用到「自訂挑戰」模式
- 題庫可匯出/匯入（JSON 格式）
- 這是教育市場的差異化功能

### L5. 視覺升級
- 怪獸 idle 動畫（呼吸、浮動已有，可加眨眼、尾巴擺動）
- 場景天氣效果（下雨、飄雪、落葉隨風向變化）
- 攻擊特效 2.0：加入螢幕震動（CSS transform）、短暫慢動作
- 進化動畫加長：展示新形態 + 數值變化

### L6. 數據分析儀表板（家長模式）
- 從設定頁進入（需輸入簡單密碼防兒童誤入）
- 統計圖表：
  - 各運算的正確率趨勢
  - 最常答錯的題型
  - 每日遊玩時間
  - 進步曲線（正確率隨時間提升）
- 匯出報告（PDF / 截圖分享）
- 這是說服家長付費的關鍵功能

---

## 優先級排序建議

按「投入產出比」排序，建議的實作順序：

```
第一波（必做，上架前提）
  S1 音效系統        ← 體驗提升最大
  S2 存檔系統        ← 沒有這個玩家會流失
  S3 新手教學        ← 低齡用戶留存關鍵
  S6 錯題回顧        ← 教育類 App 審查加分

第二波（強烈建議）
  S4 設定頁面        ← 依賴 S1/S5
  S5 難度選擇        ← 擴大年齡層覆蓋
  M6 國際化          ← 國際市場前提
  M1 怪獸圖鑑        ← 收集驅動力

第三波（內容擴充）
  M2 成就系統        ← 重玩動力
  M3 電系主角        ← 內容量
  M4 關卡模式        ← 遊戲時長
  M5 每日挑戰        ← 日活留存

第四波（上架 + 差異化）
  L1 上架包裝        ← iOS + Steam 打包
  L2 線上排行榜      ← 社交競爭
  L3 本地對戰        ← 殺手功能
  L6 家長儀表板      ← 付費說服力

長線投資
  L4 自訂題庫        ← 教育市場差異化
  L5 視覺升級        ← 持續打磨
```

---

## 技術架構演進

```
現在:   React 19 + Vite + PWA (純前端)
  │
  ├─ 短期: + Howler.js (音效) + i18next (i18n)
  │
  ├─ 中期: + Firebase/Supabase (排行榜/雲存檔)
  │
  └─ 長期:
       ├─ + Capacitor → iOS App Store
       └─ + Electron  → Steam (Win/Mac)
```

依賴項目保持最少。核心邏輯永遠是純前端 React，平台包裝層只是外殼。

---

## App Store / Steam 上架 Checklist

### Apple App Store
- [ ] Apple Developer 帳號 ($99/年)
- [ ] App icon 全尺寸
- [ ] Launch screen
- [ ] 隱私政策 URL
- [ ] 年齡分級填報（4+ 教育類）
- [ ] 截圖 (iPhone 6.7" + 6.1" + iPad)
- [ ] App 描述（繁中 + 英文）
- [ ] Capacitor 打包 + Xcode 簽名
- [ ] TestFlight 測試
- [ ] 提交審查

### Steam
- [ ] Steamworks 開發者帳號 ($100)
- [ ] 商店頁面素材（header, capsule, screenshots）
- [ ] 遊戲 trailer 影片（30–60 秒）
- [ ] Electron 打包 (Win + Mac)
- [ ] Steamworks SDK 整合
- [ ] 鍵盤 / 手把操作
- [ ] 商店描述 + 標籤
- [ ] 提交審查

---

*最後更新：2026-02-14*
