.selection-screen{
  height:100%;
  display:flex;
  flex-direction:column;
  background:linear-gradient(180deg,#0f172a 0%,#1e1b4b 40%,#312e81 100%);
  color:#fff;
  overflow:hidden;
}

.selection-header{
  padding:12px 16px 6px;
  display:flex;
  align-items:center;
  gap:12px;
  flex-shrink:0;
}

.selection-back-btn{
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  color:#fff;
  font-size:1.0rem;
  font-weight:700;
  width:36px;
  height:36px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}

.selection-title{
  font-size:1.0625rem;
  font-weight:800;
  letter-spacing:1px;
}

.selection-subtitle{
  font-size:0.625rem;
  opacity:.4;
  margin-top:1px;
}

.selection-slot-row{
  padding:0 16px 6px;
  display:flex;
  gap:8px;
  flex-shrink:0;
}

.selection-slot-btn{
  flex:1;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.04);
  color:#fff;
  font-size:0.75rem;
  font-weight:700;
  padding:6px 8px;
}

.selection-slot-btn.slot-p1.is-focus{
  border-color:#60a5fa;
  background:rgba(96,165,250,0.2);
}

.selection-slot-btn.slot-p2.is-focus{
  border-color:#f472b6;
  background:rgba(244,114,182,0.2);
}

.selection-stage-wrap{
  padding:0 16px 8px;
  flex-shrink:0;
}

.selection-stage-caption{
  font-size:0.625rem;
  opacity:.45;
  margin-bottom:4px;
}

.selection-stage-row{
  display:flex;
  gap:6px;
}

.selection-stage-btn{
  --stage-c1:#6366f1;
  --stage-bg-active:rgba(99,102,241,0.22);
  flex:1;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.04);
  color:#fff;
  font-size:0.6875rem;
  font-weight:600;
  padding:6px 8px;
}

.selection-stage-btn.is-active{
  border-color:var(--stage-c1);
  background:var(--stage-bg-active);
  font-weight:800;
}

.selection-card-list{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:0 12px 8px;
  gap:5px;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}

.selection-card-btn{
  --sel-c1:#6366f1;
  --sel-c2:#8b5cf6;
  --sel-bg-a:rgba(99,102,241,0.08);
  --sel-bg-b:rgba(139,92,246,0.06);
  --sel-bg-selected-a:rgba(99,102,241,0.24);
  --sel-bg-selected-b:rgba(139,92,246,0.2);
  --sel-border-soft:rgba(99,102,241,0.14);
  --sel-border-top:rgba(99,102,241,0.3);
  background:linear-gradient(
    135deg,
    var(--sel-bg-a),
    var(--sel-bg-b)
  );
  border:1px solid var(--sel-border-soft);
  border-radius:12px;
  padding:8px 12px;
  display:flex;
  flex-direction:column;
  gap:0;
  text-align:left;
  color:#fff;
  transition:all .3s ease;
  flex-shrink:0;
}

.selection-card-btn:disabled{
  opacity:1;
}

.selection-card-btn.is-selected{
  background:linear-gradient(
    135deg,
    var(--sel-bg-selected-a),
    var(--sel-bg-selected-b)
  );
  border:2px solid var(--sel-c1);
  padding:10px 12px;
}

.selection-card-btn.is-p1{border:2px solid #60a5fa}
.selection-card-btn.is-p2{border:2px solid #f472b6}

.selection-card-btn.is-locked{
  background:linear-gradient(135deg,rgba(2,6,23,0.72),rgba(15,23,42,0.88));
  border-color:rgba(148,163,184,0.4);
  cursor:not-allowed;
}

.selection-card-btn.is-locked .selection-card-sprite{
  filter:saturate(0) brightness(0.16) contrast(1.12);
}

.selection-card-top{
  display:flex;
  align-items:center;
  gap:10px;
}

.selection-card-sprite{
  width:clamp(76px, 16vw, 104px);
  min-width:clamp(76px, 16vw, 104px);
  height:clamp(56px, 12vw, 82px);
  display:flex;
  align-items:flex-end;
  justify-content:center;
  flex-shrink:0;
  transition:transform .3s;
}

.selection-card-sprite.is-selected{animation:spinSelect .7s ease-in-out}

.selection-card-btn.is-selected .selection-card-sprite{
  height:clamp(62px, 13vw, 92px);
}

.selection-card-sprite-inner{
  transform:scaleX(1);
  transform-origin:center center;
}

.selection-card-sprite-inner.is-evolved-flip{
  animation:selectionHorizontalFlip .55s cubic-bezier(.24,.8,.22,1) both;
}

.selection-card-main{
  flex:1;
  min-width:0;
}

.selection-card-name{
  font-size:0.9375rem;
  font-weight:800;
  margin-bottom:2px;
}

.selection-card-type-tag{
  font-size:0.625rem;
  opacity:.5;
  margin-left:5px;
}

.selection-card-difficulty-tag{
  font-size:0.625rem;
  margin-left:6px;
  letter-spacing:.5px;
  color:rgba(250,204,21,0.95);
  text-shadow:0 0 8px rgba(250,204,21,0.24);
}

.selection-card-locked-tag{
  font-size:0.625rem;
  margin-left:5px;
  padding:1px 6px;
  border-radius:8px;
  border:1px solid rgba(248,250,252,0.28);
  background:rgba(148,163,184,0.14);
  opacity:.9;
}

.selection-role-tag{
  font-size:0.625rem;
  margin-left:6px;
  padding:1px 6px;
  border-radius:8px;
  border:1px solid transparent;
}

.selection-role-tag.is-p1{
  background:rgba(96,165,250,0.2);
  border-color:rgba(96,165,250,0.5);
}

.selection-role-tag.is-p2{
  background:rgba(244,114,182,0.2);
  border-color:rgba(244,114,182,0.5);
}

.selection-card-moves-brief{
  font-size:0.625rem;
  opacity:.5;
  line-height:1.4;
}

.selection-card-grade-hint{
  font-size:0.625rem;
  opacity:.72;
  line-height:1.45;
  margin-bottom:2px;
}

.selection-card-locked-hint{
  font-size:0.625rem;
  line-height:1.45;
  opacity:.72;
}

.selection-card-expand{
  margin-top:8px;
  padding-top:8px;
  border-top:1px solid var(--sel-border-top);
  animation:fadeIn .3s ease;
}

.selection-card-desc{
  font-size:0.6875rem;
  opacity:.8;
  line-height:1.6;
  margin-bottom:6px;
}

.selection-card-passive-list{
  display:flex;
  flex-direction:column;
  gap:3px;
  margin-bottom:8px;
}

.selection-card-passive-item{
  font-size:0.625rem;
  background:rgba(255,255,255,0.06);
  padding:4px 8px;
  border-radius:8px;
  line-height:1.5;
}

.selection-card-passive-label{opacity:.5}

.selection-card-move-grid{
  display:flex;
  gap:5px;
}

.selection-move-chip{
  flex:1;
  background:rgba(255,255,255,0.07);
  border-radius:8px;
  padding:5px 3px;
  text-align:center;
}

.selection-move-chip-icon{font-size:0.75rem}
.selection-move-chip-name{font-size:0.5625rem;font-weight:700;margin-top:1px}
.selection-move-chip-desc{font-size:0.5625rem;opacity:.5;margin-top:1px}

.selection-confirm-wrap{
  padding:6px 14px 14px;
  animation:fadeIn .3s ease;
  flex-shrink:0;
}

.selection-confirm-btn{
  width:100%;
  padding:13px 0;
  border:none;
  border-radius:14px;
  color:#fff;
  font-size:1.0rem;
  font-weight:800;
  cursor:pointer;
}

.selection-confirm-btn-single{
  --confirm-c1:#6366f1;
  --confirm-c2:#8b5cf6;
  --confirm-shadow:rgba(99,102,241,0.4);
  background:linear-gradient(135deg,var(--confirm-c1),var(--confirm-c2));
  letter-spacing:2px;
  box-shadow:0 4px 20px var(--confirm-shadow);
}

.selection-confirm-btn-dual{letter-spacing:1px}
.selection-confirm-btn-dual.is-pvp{
  background:linear-gradient(135deg,#ec4899,#f43f5e);
  box-shadow:0 4px 20px rgba(244,63,94,0.32);
}

.selection-confirm-btn-dual.is-coop{
  background:linear-gradient(135deg,#0ea5e9,#22d3ee);
  box-shadow:0 4px 20px rgba(14,165,233,0.32);
}

@keyframes selectionHorizontalFlip{
  0%{
    transform:scaleX(1);
    filter:brightness(1);
  }
  48%{
    transform:scaleX(0.05);
    filter:brightness(1.18);
  }
  100%{
    transform:scaleX(-1);
    filter:brightness(1);
  }
}

@media (max-width:768px){
  .selection-header{
    padding:10px 12px 6px;
    gap:10px;
  }

  .selection-back-btn{
    width:34px;
    height:34px;
    border-radius:9px;
    font-size:0.9375rem;
  }

  .selection-title{
    font-size:1rem;
    letter-spacing:.7px;
  }

  .selection-subtitle{
    font-size:0.5938rem;
  }

  .selection-slot-row{
    padding:0 12px 6px;
    gap:7px;
  }

  .selection-slot-btn{
    font-size:0.6875rem;
    padding:6px 7px;
    min-height:40px;
  }

  .selection-stage-wrap{
    padding:0 12px 8px;
  }

  .selection-stage-btn{
    font-size:0.625rem;
    padding:6px 7px;
    min-height:38px;
  }

  .selection-card-list{
    padding:0 10px 8px;
    gap:6px;
  }

  .selection-card-btn{
    border-radius:11px;
    padding:8px 10px;
  }

  .selection-card-btn.is-selected{
    padding:9px 10px;
  }

  .selection-card-top{
    gap:8px;
  }

  .selection-card-sprite{
    width:clamp(68px, 18vw, 94px);
    min-width:clamp(68px, 18vw, 94px);
    height:clamp(52px, 11vw, 74px);
  }

  .selection-card-btn.is-selected .selection-card-sprite{
    height:clamp(56px, 12vw, 82px);
  }

  .selection-card-name{
    font-size:0.875rem;
  }

  .selection-card-type-tag,
  .selection-card-difficulty-tag,
  .selection-card-locked-tag,
  .selection-role-tag{
    font-size:0.5625rem;
  }

  .selection-card-moves-brief,
  .selection-card-grade-hint,
  .selection-card-locked-hint,
  .selection-card-desc{
    font-size:0.625rem;
  }

  .selection-card-passive-item{
    font-size:0.5938rem;
    padding:4px 7px;
  }

  .selection-move-chip{
    padding:4px 3px;
  }

  .selection-move-chip-name,
  .selection-move-chip-desc{
    font-size:0.5312rem;
  }

  .selection-confirm-wrap{
    padding:6px 12px 12px;
  }

  .selection-confirm-btn{
    font-size:0.9375rem;
    padding:12px 0;
    min-height:44px;
  }
}

@media (max-width:480px){
  .selection-header{
    padding:8px 10px 4px;
    gap:8px;
  }

  .selection-back-btn{
    width:32px;
    height:32px;
    border-radius:8px;
    font-size:0.875rem;
  }

  .selection-title{
    font-size:0.9375rem;
    letter-spacing:.4px;
  }

  .selection-subtitle{
    font-size:0.5625rem;
  }

  .selection-slot-row{
    padding:0 10px 5px;
    flex-direction:column;
    gap:6px;
  }

  .selection-slot-btn{
    width:100%;
    font-size:0.6562rem;
    padding:6px 8px;
    min-height:40px;
  }

  .selection-stage-wrap{
    padding:0 10px 6px;
  }

  .selection-stage-row{
    gap:5px;
  }

  .selection-stage-btn{
    font-size:0.5938rem;
    padding:5px 6px;
    min-height:36px;
    border-radius:9px;
  }

  .selection-card-list{
    padding:0 8px 6px;
    gap:5px;
  }

  .selection-card-btn{
    border-radius:10px;
    padding:7px 8px;
  }

  .selection-card-btn.is-selected{
    padding:8px 8px;
  }

  .selection-card-top{
    gap:7px;
  }

  .selection-card-sprite{
    width:clamp(62px, 30vw, 84px);
    min-width:clamp(62px, 30vw, 84px);
    height:clamp(46px, 19vw, 64px);
  }

  .selection-card-btn.is-selected .selection-card-sprite{
    height:clamp(50px, 20vw, 72px);
  }

  .selection-card-name{
    font-size:0.8125rem;
  }

  .selection-card-type-tag,
  .selection-card-difficulty-tag{
    margin-left:4px;
  }

  .selection-card-type-tag,
  .selection-card-difficulty-tag,
  .selection-card-locked-tag,
  .selection-role-tag{
    font-size:0.5312rem;
  }

  .selection-card-moves-brief,
  .selection-card-grade-hint,
  .selection-card-locked-hint{
    font-size:0.5625rem;
    line-height:1.35;
  }

  .selection-card-expand{
    margin-top:6px;
    padding-top:6px;
  }

  .selection-card-desc{
    font-size:0.5938rem;
    line-height:1.45;
  }

  .selection-card-passive-list{
    gap:2px;
    margin-bottom:6px;
  }

  .selection-card-passive-item{
    font-size:0.5625rem;
    padding:3px 6px;
  }

  .selection-card-move-grid{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:4px;
  }

  .selection-move-chip{
    padding:4px 2px;
  }

  .selection-move-chip-icon{
    font-size:0.6875rem;
  }

  .selection-move-chip-name,
  .selection-move-chip-desc{
    font-size:0.5rem;
  }

  .selection-confirm-wrap{
    padding:6px 10px 10px;
  }

  .selection-confirm-btn{
    font-size:0.875rem;
    padding:10px 0;
    min-height:44px;
    border-radius:12px;
  }
}
